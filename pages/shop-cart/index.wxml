<!--index.wxml-->
<view class="container">
     <!-- <template is="{{goodsList.list.length > 0 ? 'cart-goods-list' : 'no-goods'}}" data="{{...goodsList}}"></template> -->
     <view class="title-box" hidden="{{!isEmpty}}">
        购物车空空如也～
    </view>
    <view class="goodsList" hidden="{{isEmpty}}">
        <view class="a-gooods" wx:for="{{list}}"  wx:key="{{itemId}}" >
            <view class="a-goods-conts {{item.active? 'active':''}}" bindtap="selectTap" bindtouchstart="touchS" bindtouchmove="touchM" bindtouchend="touchE" data-index="{{index}}" style="{{item.left}}">
                <navigator hover-class="none" catchtap="stopTap" class="goods-info" url="/pages/detail/detail?id={{item.productId}}">
                    <view class="img-box">
                        <image src="{{item.image}}" class="img"/>
                    </view>
                    <view class="text-box">
                        <view class="goods-title">{{item.desc}}</view>
                        <view class="goods-label" catchtap="selectSpec" data-index="{{index}}">{{item.spec}}</view>
                        <view class="goods-price">¥ {{item.unitPrice}}</view>
                        <view class="buy-num">
                            <view class="jian-btn {{item.count==1? 'disabled' : ''}}" catchtap="jianBtnTap" data-index="{{index}}">-</view>
                            <input  type="number" value="{{item.count}}" disabled/>
                            <view class="jia-btn {{item.count==curTouchGoodStore? 'disabled' : ''}}" catchtap="jiaBtnTap" data-index="{{index}}">+</view>
                        </view>
                    </view>
                </navigator>
                <view class="delete-btn" data-index="{{index}}" catchtap="delItem">
                  删除
                </view>
            </view>
        </view>
    </view>
    <view class="jiesuan-box">
        <view class="left-price">
            <view class="all-selected  {{allSelect?'active':''}}" bindtap="bindAllSelect">全选</view>
            <view class="total" hidden="{{noSelect}}">合计：¥ {{totalPrice}}</view>
        </view>
        <view class="to-pay-btn {{noSelect?'no-select':''}}" bindtap="toPayOrder">去结算</view>
    </view>

    <view catchtouchmove="true" class="show-popup" hidden="{{hideShopPopup}}" >
        <view class="popup-mask" bindtap="closePopupTap"></view>
        <view class="popup-contents">
             <view class="pop-goods-info">
                <view class="pop-img-box">
                    <image mode="aspectFit" src="{{single_image}}" class="goods-thumbnail"/>
                </view>
                <view class="popup-good-attr">
                    <view class="pop-goods-price">¥ {{pop_goods_price}}</view>
                    <view class="pop-goods-stock">库存{{stock_amount}}件</view>
                    <view class="pop-goods-select">已选:{{select_string}}</view>
                </view>
                 <view class="pop-goods-close" bindtap="closePopupTap"></view> 
             </view>
            <view class="size-label-box">
                <view style="border-bottom: 1rpx solid #eee;" wx:for="{{attrs}}" wx:for-item="property" wx:for-index="idx" wx:key="id">
                <view class="label">{{property.attrName}}</view> 
                <view class="label-item-box">
                    <view class="label-item {{item.active ? 'active' : '' }}" wx:for="{{property.children}}" wx:key="id" 
                    bindtap="labelItemTap" data-propertyindex="{{idx}}" data-propertyid="{{property.id}}" 
                    data-propertyname="{{property.attrName}}" data-propertychildindex="{{index}}" data-propertychildid="{{item.id}}" data-propertychildname="{{item.attrName}}">
                        {{item.attrName}}
                    </view> 
                </view>
                </view> 
            </view> 
            
            <block>
                <view class="popup-ok-btn" bindtap="onOKButton">确定</view>
            </block>
        </view>
    </view>
</view>
